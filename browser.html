<html>
<input type='text' id='message' placeholder="Message">
<button type='button' onclick="postMessage()">Post Message</button>
<div id='messages'></div>
<script>
	var WebSocket = require('ws').Server;
	var ws1;
function init(){
	ws1 = new WebSocket('ws://104.248.72.137:3000/',{perMessageDeflate:false});
	console.log("starting");
	ws1.onopen = function(event){
	ws1.send('Hello from Browser!');
}
   ws1.onmessage = function(event){
   console.log('Message back from server');
   displayMessage(event);
}
}
function postMessage(){
	
	
	var message = document.getElementById("message").value;
	console.log(message);
	ws1.send(message);
}
function displayMessage(event){
	var messages = document.getElementById('messages');
	var newMessage = "<div>" + event.data + "</div>";
	messages.innerHTML = messages.innerHTML + newMessage;
}
init();
</script></html>
